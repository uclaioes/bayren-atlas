(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[31],{"9Dpu":function(e,t,r){"use strict";var n=r("mXGw"),a=r("I9Y2");t.a=Object(a.a)(n.createElement("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight")},AmAS:function(e,t,r){"use strict";function n(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}r.d(t,"a",(function(){return n}))},AyeM:function(e,t,r){"use strict";var n=r("63Ad");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("mXGw")),o=(0,n(r("c9Um")).default)(a.default.createElement("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"ChevronLeft");t.default=o},EAig:function(e,t,r){"use strict";var n=r("mXGw"),a=r.n(n),o=r("Fcif"),i=r("6CzD"),s=r("mK0O"),u=r("AmAS"),l=r("hisu"),c=r("yBJb"),d=r("0942"),p=r("CHlC"),f=r("kMo5"),m=r("P+uj"),h=r("tB06"),g=(r("N3FF"),r("BQn0")),y=r("LLEl"),b=r("t1Qi"),v=r("ZsFq"),O=r.n(v),w=r("9va6"),j=r.n(w),S=r("cneo"),k=r("leJv"),I=(r("0twC"),r("lOOT")),P=function(e){var t=Object(I.a)().shape.toolbarHeight||0;return"calc(".concat(e," - ").concat(t,"px)")},F=r("ygU5"),L=r("ERkv"),C=r("IArN"),E=r("R82R"),z=r("/ZiB"),M=r("xbiF"),_=r.n(M),R=r("8Jek"),x=r.n(R),V=r("/pyM"),D=r("TGon"),q=r("dV/x"),A=r("CXRx"),T=r("dJqr"),N=r("/NZN"),B=r("oQEK"),G=r("Vz49"),U=r.n(G),Y=r("3zFd"),H=r.n(Y),W=r("5dyF"),X=r.n(W),Z=r("OhB8"),J=a.a.createElement,Q=Object(E.a)((function(e){return{root:{display:"flex",borderBottom:"2px solid ".concat(e.palette.primary.dark),padding:e.spacing(0,1),alignItems:"center"},tabRoot:{fontSize:16}}})),K=function(e){e.featureId;var t=Object(q.a)(e,["featureId"]);return J(B.a,Object(o.a)({color:"inherit",size:"small"},t),J(H.a,{color:"inherit",fontSize:"small"}))},$=function(e){e.VisualizationStore;var t=Object(F.a)().uiStore,r=Z.h?"":"/".concat(t.context);return J(g.a,{ml:"auto"},J(X.a,{href:"".concat(r,"/profiles"),passHref:!0},J(N.a,{size:"small",variant:"outlined",key:"compare-profile-button",endIcon:J(U.a,null)},"Compare Profiles")))},ee=Object(k.d)((function(e){var t=e.VisualizationStore,r=e.FeaturesStore,o=t.selectedFeatureIds,i=t.activeFeatureId,s=Q(),u=Object(n.useCallback)((function(e,r){t.selectFeature(e,r)}),[t]),l=Object(n.useCallback)((function(e){t.deselectFeature(e)}),[t]),c=o.map((function(e,n){var a,o,c=e===i;return J(A.a,{key:e,onClick:function(t){t.stopPropagation(),u(e,n)},value:e,classes:{root:s.tabRoot},label:J(g.a,{display:"flex",flexDirection:"row",alignItems:"center"},(null===(a=r.featureNameByLayerAndId)||void 0===a||null===(o=a[t.layer])||void 0===o?void 0:o[e])||e,J(g.a,{pl:1},J(K,{onClick:function(t){t.stopPropagation(),l(e)},color:c?"primary":"inherit"})))})})),d=c.length>0,p=c.length>1;return J(g.a,{className:s.root},d&&J(a.a.Fragment,null,J(T.a,{value:i,indicatorColor:"primary"},c),p&&J($,{VisualizationStore:t})),!d&&J(g.a,{p:2},J(z.a,{variant:"body2"},"Click on a ",Object(Z.c)(t.layer)," to compare it with others.")))})),te=function(e){var t=Object(F.a)("features"),r=Object(F.a)("visualization");return J(ee,Object(o.a)({},e,{FeaturesStore:t,VisualizationStore:r}))},re=a.a.createElement;function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ae={usage_bld:{name:"usetype",keys:["commercial","industrial","institutional","agriculture","other","res"]},usage_sqft:{name:"usetype",keys:["nonres ","multi_family"]},usage_income:{name:"income_quintile",keys:["income_quintile_1","income_quintile_2","income_quintile_3","income_quintile_4","income_quintile_5"]},usage_vintage:{name:"usetype",keys:["commercial","industrial","institutional","agriculture","other","res"]}},oe=Object(E.a)((function(e){return{root:{zIndex:1e3,position:"absolute",bottom:e.spacing(0),left:"50%",width:"100%",padding:e.spacing(0,4,4,4),maxWidth:1e3,transform:"translate(-50%, 0)"},wrapper:{backgroundColor:e.palette.grey[100]}}})),ie=Object(k.d)((function(){var e=Object(F.a)("visualization"),t=e.selectedFeatureIds,r=oe(),a=Object(n.useRef)(null),o=_()(a),u=e.theme,l=e.layer,c=e.usage,d=e.measure,p=e.activeFeatureId,f=[],m=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(r),!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e.filterOptionsWithoutYear);return"all"===m[ae[u].name]?(delete m[ae[u].name],f.push.apply(f,Object(i.a)(ae[u].keys))):f.push(m[ae[u].name]),re(g.a,{className:r.root},re(g.a,{boxShadow:1,className:x()(r.wrapper)},re(te,null),re(C.a,{in:t.length>0},re(g.a,{display:"flex",pr:4,py:2},re(g.a,{width:"50%",display:"flex",alignItems:"end",flexDirection:"column"},re(V.a,{dataQuery:{featureId:p,geography:l,usageTheme:u,usageMeasure:d,usageType:c,filterOptions:m},stackBy:"year",stacks:["2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018"],layerBy:ae[u].name,layers:f,width:o.width,height:o.height})),re(g.a,{pl:4,width:"50%",ref:a,py:1},re(z.a,{variant:"h6"},"Summary"),p&&re(D.a,{activeFeatureId:p,usage:c,layer:l,fields:["population","median-income","usage","median-usage","median-usage-sqft","percap-usage"]}))))))})),se=r("aNYv"),ue=r("wGBp"),le=r("AyeM"),ce=r.n(le),de=r("3P9M"),pe=r.n(de),fe=r("Piq3"),me=r.n(fe),he=a.a.createElement,ge=me.a.bind({}),ye=function(e){var t=e.children,r=e.colorProps,n=e.label,a=Object(q.a)(e,["children","colorProps","label"]);return he(g.a,Object(o.a)({mb:.5,display:"flex"},a),he(be,r),n&&he(g.a,{mr:"auto"},he(z.a,{variant:"caption"},n)),t)},be=function(e){return he(g.a,Object(o.a)({width:20,height:20,mr:1},e))};ye.defaultProps={children:null};var ve=Object(k.d)((function(){var e=Object(F.a)("visualization"),t=Object(F.a)("features"),r=Object(se.a)(e.yearExtent,2),n=r[0],a=r[1],o=t.extentsByRequestId[t.toRequestId(e.requestProps)];if(!o)return null;var i=o.data[e.measure].thresholdsByFilterOption,s=[];if(null!==i){var u=e.filterOptionsWithoutYear,l=Object(Z.a)(u),c=i.filter(l);1===Object(w.uniqWith)(c,w.isEqual).length&&(s=c[0])}var d=[];if(void 0===s)return null;if("thresholds"===s.type){var p=e.getChromaRange();d=s.thresholds.map((function(t,r,n){var a=Object(se.a)(t,2),o=a[0],i=a[1];return 0===r?"".concat(e.formatNumber(o)," \u2014 ").concat(e.formatNumber(i)," ").concat(Object(Z.g)(e.usage)):"".concat(e.formatNumber(n[r-1][1])," \u2014 ").concat(e.formatNumber(i)," ").concat(Object(Z.g)(e.usage))})).map((function(e,t){return he(ye,{key:"".concat(t,":").concat(e),label:e,colorProps:{style:{backgroundColor:p[t]}}})}))}if("values"===s.type){var f=e.getChromaRange(s.values.length);d=s.values.map((function(t){return"".concat(e.formatNumber(t)," ").concat(Object(Z.g)(e.usage))})).map((function(e,t){return he(ye,{key:e,label:e,colorProps:{style:{backgroundColor:f[t]}}})}))}return(d=d.reverse()).push(he(ye,{key:"masked",label:"Masked",colorProps:{style:{backgroundImage:"url(/masked-pattern.svg)"}}},he(ue.a,{arrow:!0,placement:"left",title:"Data masked for privacy. See FAQs for more information."},he(pe.a,{fontSize:"small"})))),d.push(he(ye,{key:"not-available",label:"Not available",colorProps:{style:{backgroundImage:"url(/undefined-pattern.svg)"}}},he(ue.a,{arrow:!0,placement:"left",title:"Utility data not available."},he(pe.a,{fontSize:"small"})))),he(g.a,{boxShadow:1,position:"absolute",top:8,right:8,p:2,bgcolor:"grey.100",className:ge("container",{"is-presenting":e.isPresenting})},he(g.a,{display:"flex",alignItems:"center",mb:2},he(B.a,{disabled:n===e.filterOptions.year,onClick:e.decreaseYear},he(ce.a,null)),he(g.a,{mx:2},he(z.a,{variant:"body2",align:"center"},he("b",null,Object(Z.f)(e.usage)," in ",he("br",null),e.filterOptions.year))),he(B.a,{disabled:a===e.filterOptions.year,onClick:e.increaseYear},he(U.a,null))),he(g.a,{display:"flex",flexDirection:"column"},d))})),Oe=r("P5N8"),we=["income_quintile_1","income_quintile_2","income_quintile_3","income_quintile_4","income_quintile_5"],je=["vintage_id_1","vintage_id_2","vintage_id_3","vintage_id_4"],Se=["sqft_id_2","sqft_id_3","sqft_id_4","sqft_id_5","sqft_id_6","sqft_id_7"],ke=["usage","usage_percap"],Ie=["multi_family","nonres"],Pe=function(e,t){var r=function(e){switch(e){case"bayren":return["commercial","industrial","institutional","other","res","multi_family","single_family"];default:return["commercial","industrial","institutional","agriculture","other","res","multi_family","single_family"]}}(t),n=function(e){switch(e){case"bayren":return["commercial","industrial","institutional","other","res"];default:return["commercial","industrial","institutional","agriculture","other","res"]}}(t);return{usage_income:{primary:{noun:"of residents who earn",keyToCompare:"income_quintile",values:we,labels:function(){return we.map(e)}},secondary:void 0,measure:{keyToCompare:"dynamic",values:ke,labels:function(){return ke.map(Z.d)}}},usage_vintage:{primary:{noun:"of buildings built",keyToCompare:"vintage_id",values:je,labels:function(){return je.map(e)}},secondary:{noun:"used as",keyToCompare:"usetype",values:n,labels:function(){return n.map(e)}},measure:void 0},usage_bld:{primary:{noun:"of buildings categorized as",keyToCompare:"usetype",values:r,labels:function(){return r.map(e)}},secondary:void 0,measure:void 0},usage_sqft:{primary:{noun:"of buildings sized",keyToCompare:"sqft_id",values:Se,labels:function(){return Se.map(e)}},secondary:{noun:"and categorized as",keyToCompare:"usetype",values:Ie,labels:function(){return Ie.map(e)}},measure:void 0}}},Fe=r("Nw+1"),Le=a.a.createElement;function Ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(r),!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ze=Object(k.d)((function(e){var t=e.disabled,r=Object(F.a)().uiStore,n=Object(F.a)("visualization"),a=n.layer,o=n.usage,s=n.theme,u=n.measure,l=n.filterOptions,c=n.getNoun,d=Pe(c,r.context),p=Object(Oe.a)(r.context);if(!s||!o||!u||!a)return null;var f,m="usage_bld"===s,h=function(e){n.changeMeasure(e.target.value)},y=l[d[s].primary.keyToCompare]?l[d[s].primary.keyToCompare]:d[s].primary.values[0],b=d[s].primary.noun,v=Le(Fe.a,{disabled:t,onChange:function(e){var t=n.theme;[].push([d[t].primary.keyToCompare,e.target.value]);var r=d[t].primary.keyToCompare,a=e.target.value;n.setFilterOption({key:r,value:a}),m&&"res"!==a&&"usage_percap"===u&&n.changeMeasure("usage")},value:y,"aria-label":"select primary"},Object(Fe.c)({values:d[s].primary.values,labels:d[s].primary.labels(n.filterOptions.year)})),O=null,w="";if(void 0!==d[s].secondary){w=d[s].secondary.noun;var j=l[d[s].secondary.keyToCompare]?l[d[s].secondary.keyToCompare]:d[s].secondary.values[0];O=Le(Fe.a,{disabled:t,onChange:function(e){var t=n.theme;[].push([d[t].secondary.keyToCompare,e.target.value]);var r=d[t].secondary.keyToCompare,a=e.target.value;n.setFilterOption({key:r,value:a})},value:j,"aria-label":"select secondary"},Object(Fe.c)(Ee({},d[s].secondary)))}if(void 0!==d[s].measure)f=Le(Fe.a,{disabled:t,onChange:h,value:u,"aria-label":"select measure"},Object(Fe.c)(Ee({},d[s].measure)));else if(m){var S=p.measureInclPerCaptia,k=S.labels,I=S.values,P=[].concat(Object(i.a)(Object(i.a)(Array(I.length-1)).map((function(){return!1}))),["res"!==y]);f=Le(Fe.a,{disabled:t,onChange:h,value:u,"aria-label":"select measure"},Object(Fe.c)({labels:k,values:I,disabled:P}))}else f=Le(Fe.a,{disabled:t,onChange:h,value:u,"aria-label":"select measure"},Object(Fe.c)(Ee({},p.measure)));return Le(g.a,{display:"flex",margin:"auto",alignItems:"center"},Le(Fe.b,null,"Show the"),f,Le(Fe.a,{disabled:t,onChange:function(e){n.changeUsage(e.target.value)},value:o,"aria-label":"select usage"},Object(Fe.c)(Ee({},p.usage))),Le(Fe.b,null,b),v,w,O,Le(Fe.b,null,"by"),Le(Fe.a,{disabled:t,onChange:function(e){n.changeLayer(e.target.value)},value:a,"aria-label":"select layer"},Object(Fe.c)(Ee({},p.layer))))})),Me=a.a.createElement;function _e(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(m.a)(e);if(t){var a=Object(m.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(f.a)(this,r)}}var Re=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],xe=function(e){Object(p.a)(n,e);var t=_e(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).getMap=function(){return r.map},r.getCurrentViewport=function(){var e=r.map.transform;return{latitude:e.center.lat,longitude:e.center.lng,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}},r.flyToRandomPosition=function(e){if(r.map){var t=[j.a.random(.999*r.props.longitude,1.001*r.props.longitude),j.a.random(.999*r.props.latitude,1.001*r.props.latitude)];r.map.flyTo({center:t,pitch:j.a.random(0,15),bearing:j.a.random(-14.985,15*1.001),zoom:j.a.random(8,10),duration:e})}},r.toggleInteractionHandlers=function(e){r.map&&Re.forEach((function(t){e&&r.map[t].enable(),e||r.map[t].disable()}))},r.updateViewport=function(e,t){(t.latitude!==e.latitude||t.longitude!==e.longitude||t.zoom!==e.zoom||t.pitch!==e.pitch||t.bearing!==e.bearing||t.altitude!==e.altitude)&&(r.map.jumpTo({center:[t.longitude,t.latitude],zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.altitude!==e.altitude&&(r.map.transform.altitude=t.altitude))},r.state={webglSupported:!0,initialized:!1},r}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=r("bhPm");t.supported()||this.setState({webglSupported:!1}),t.accessToken=this.props.accessToken;var n=new t.Map({container:"mapboxMap",style:"mapbox://styles/studionand/cjnoneq261f6c2spe4y8rnnkb",center:[this.props.longitude,this.props.latitude],pitch:this.props.pitch,bearing:this.props.bearing,zoom:this.props.zoom});n.resize(),this.map=n,n.on("load",(function(){if(e.map.resize(),e.toggleInteractionHandlers(e.props.focus),e.setState({initialized:!0}),e.props.onLoad&&e.props.onLoad(e.map),e.props.isIdleAnimated){e.flyToRandomPosition(13e3),e.interval=setInterval(e.flyToRandomPosition,18e3,13e3)}})),this.props.onViewportChanged&&(this.map.on("drag",(function(){return e.props.onViewportChanged(e.getCurrentViewport())})),this.map.on("zoom",(function(){return e.props.onViewportChanged(e.getCurrentViewport())}))),this.props.onRender&&this.map.on("render",(function(t){return e.props.onRender(t)})),this.props.onViewportMouseMoved&&this.map.on("mousemove",(function(t){return e.props.onViewportMouseMoved(t)})),this.props.onViewportMouseClicked&&this.map.on("click",(function(t){return e.props.onViewportMouseClicked(t)})),this.props.onViewportMouseEnter&&this.map.on("mouseenter",(function(t){return e.props.onViewportMouseEnter(t)})),this.props.onViewportMouseOut&&this.map.on("mouseout",(function(t){return e.props.onViewportMouseOut(t)})),this.props.onViewportMouseLeave&&this.map.on("mouseleave",(function(t){return e.props.onViewportMouseLeave(t)}))}},{key:"componentWillReceiveProps",value:function(e){this.props.focus!==e.focus&&this.toggleInteractionHandlers(e.focus)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval),this.map.off("load"),this.map.off("drag"),this.map.off("zoom"),this.map.off("render"),this.map.off("mousemove"),this.map.off("click"),this.map.off("mouseenter"),this.map.off("mouseout"),this.map.off("mouseleave"),this.map.remove()}},{key:"renderNotSupported",value:function(){return Me("div",null,"Sorry, this map needs a browser which supports WebGL.")}},{key:"render",value:function(){this.props.classes;return this.state.webglSupported?Me(g.a,{id:"mapboxMap",width:"100%",height:"100%"}):this.renderNotSupported()}}]),n}(a.a.PureComponent);xe.defaultProps={bearing:0,pitch:0,height:700,accesToken:"",queryLayers:[],className:null,isIdleAnimated:!1,focus:!1,onRender:null,onViewportChanged:null,onViewportMouseClicked:null,onViewportMouseMoved:null,onViewportMouseOut:null,onViewportMouseLeave:null,onViewportMouseEnter:null};var Ve,De,qe,Ae,Te,Ne,Be,Ge,Ue=xe,Ye=r("W2QJ"),He=r("busm"),We=r("wb7d"),Xe=a.a.createElement;function Ze(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(r),!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ze(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Qe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(m.a)(e);if(t){var a=Object(m.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(f.a)(this,r)}}var Ke=function(e,t,r){return(e-t[0])*(r[1]-r[0])/(t[1]-t[0])+r[0]},$e=(Ve=S.j.bound,De=S.j.bound,qe=S.j.bound,Object(k.d)((Te=function(e){Object(p.a)(r,e);var t=Qe(r);function r(){var e;Object(l.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).lastHoveredFeatureId=null,e.lastSelectedFeatureIds=[],Object(u.a)(e,"isInitialized",Ne,Object(d.a)(e)),Object(u.a)(e,"isFocused",Be,Object(d.a)(e)),Object(u.a)(e,"hoveredFeatureId",Ge,Object(d.a)(e)),e.componentWillUnmount=function(){e.reactOnLayerChange&&e.reactOnLayerChange(),e.reactOnMapOptionsChange&&e.reactOnMapOptionsChange(),e.reactOnLoadingFinished&&e.reactOnLoadingFinished(),e.reactOnActiveFeatureChange&&e.reactOnActiveFeatureChange(),e.reactOnSelectedFeatures&&e.reactOnSelectedFeatures(),e.reactOnHoveredFeatureChange&&e.reactOnHoveredFeatureChange()},e.map=null,e.createColorScale=function(t){if("values"===t[0].type)return Object(b.e)().domain(t[0].values).range(e.props.VisualizationStore.getChromaRange(t[0].values.length));if("thresholds"===t[0].type){var r=t[0].thresholds.map((function(e){return e[1]})).sort();return Object(b.f)().domain(r.sort((function(e,t){return e-t}))).range(e.props.VisualizationStore.getChromaRange(r.length))}return null},e.resetCurrentLayer=function(){e.isInitialized&&(e.hideAllOtherLayers(e.props.VisualizationStore.layer),e.resetSublayersForLayer(e.activeLayers))},e.jumpToCurrentLayer=function(){if(e.isInitialized){var t=e.map.cameraForBounds(e.geojsonBoundingBoxesById[e.props.VisualizationStore.layer],{padding:150});e.map.jumpTo(t)}},e.viewportChanged=function(t){e.isInitialized&&e.props.VisualizationStore.changeViewport(t)},e.mapRendered=function(){if(!e.isInitialized&&!e.isInitialized&&e.map&&e.map.loaded()){var t=e.map.getStyle().layers.map((function(e){return e.id}));e.requiredLayers.every((function(e){return t.includes(e)}))&&(e.isInitialized=!0,e.loadData(),e.jumpToCurrentLayer(),e.addReactions(),e.props.FeaturesStore.isLoading||(e.resetCurrentLayer(),e.renderMap()))}},e.viewportMouseClicked=function(){return e.isInitialized?(-1===e.props.VisualizationStore.selectedFeatureIds.indexOf(e.props.VisualizationStore.hoveredFeatureId)?e.props.VisualizationStore.selectFeature(e.hoveredFeatureId):e.props.VisualizationStore.deselectFeature(e.hoveredFeatureId),null):null},e.viewportMouseMoved=function(t){if(e.isInitialized&&!e.props.FeaturesStore.isLoading){e.focus();var r=e.map.queryRenderedFeatures(t.point,{layers:[e.activeLayers.interaction]}),n=r.length>0?r[0].properties.geo_id:null;n&&(e.map.getCanvas().style.cursor="pointer"),n!==e.hoveredFeatureId&&(e.hoveredFeatureId=n)}},e.viewportMouseOut=function(){e.isInitialized&&e.props.VisualizationStore.setTooltip(null)},e.renderMap=function(){var t=e.props.FeaturesStore.extentsByRequestId[e.props.FeaturesStore.toRequestId(e.props.VisualizationStore.requestProps)];if(!t||!e.isInitialized)return!1;var r=Object(Z.a)(e.props.VisualizationStore.filterOptions),n=Object(Z.a)(e.props.VisualizationStore.filterOptionsWithoutYear),a=t.data[e.props.VisualizationStore.measure].thresholdsByFilterOption.filter(n);if(0===a.length)return!1;var o=e.createColorScale(a),s=e.currentGeoIDs.map((function(t){var n=e.props.FeaturesStore.featuresByRequestId[e.props.FeaturesStore.toRequestId(Je(Je({},e.props.VisualizationStore.requestProps),{},{id:t}))];if(!n||404===n.data.status||403===n.data.status)return[t,null];var a=n.data.filter(r);return[t,1!==a.length?-1:a[0][e.props.VisualizationStore.measure]]})),u=function(e){return[-7777,-8888,-9999,-1,null].includes(e)},l=s.filter((function(e){return!u(e[1])})),c=l.reduce((function(e,t){return[].concat(Object(i.a)(e),[t[0],Object(b.a)(o(t[1])).toString()])}),[]),d=l.map((function(e){return e[0]}));d.length>0&&e.map.setPaintProperty(e.activeLayers.filled,"fill-color",["match",["get","geo_id"]].concat(Object(i.a)(c),["#868e96"])),e.hideAllFeaturesExceptList(e.activeLayers.filled,d);var p=s.filter((function(e){return u(e[1])})),f=p.filter((function(e){return[-9999].includes(e[1])})).map((function(e){return e[0]})),m=p.filter((function(e){return[-7777,-8888,-1,null].includes(e[1])})).map((function(e){return e[0]}));return e.hideAllFeaturesExceptList(e.activeLayers.masked,f),e.hideAllFeaturesExceptList(e.activeLayers.notdefined,m),e.map.setPaintProperty(e.activeLayers.outline,"line-color",e.outlineLineColorExpression),!0},e}return Object(c.a)(r,[{key:"onLoad",value:function(e){this.map=e,this.addSourcesAndLayers()}},{key:"addReactions",value:function(){var e=this;this.reactOnLayerChange=Object(S.B)((function(){return e.props.VisualizationStore.layer}),(function(){e.isInitialized&&(e.loadData(),e.jumpToCurrentLayer(),e.props.FeaturesStore.isLoading||(e.resetCurrentLayer(),e.renderMap()))})),this.reactOnMapOptionsChange=Object(S.B)((function(){return[e.props.VisualizationStore.usage,e.props.VisualizationStore.theme,e.props.VisualizationStore.measure,e.props.VisualizationStore.filterOptionsEncoded]}),(function(){e.isInitialized&&(e.loadData(),e.props.FeaturesStore.isLoading||e.renderMap())})),this.reactOnLoadingFinished=Object(S.B)((function(){return e.props.FeaturesStore.isLoading}),(function(t){t||(e.resetCurrentLayer(),e.renderMap())})),this.reactOnActiveFeatureChange=Object(S.k)((function(){if(e.isInitialized){var t=e.props.VisualizationStore.activeFeatureId;if(t){var r=e.geojsonLayers.find((function(t){return t.id===e.props.VisualizationStore.layer})).data.features.find((function(e){return e.properties.geo_id===t}));if(r){var n=r.bbox||O()(r);if(n){var a=[Ke((Ke(n[0],[-180,180],[0,360])+Ke(n[2],[-180,180],[0,360]))/2,[0,360],[-180,180]),Ke((Ke(n[1],[-90,90],[0,180])+Ke(n[3],[-90,90],[0,180]))/2,[0,180],[-90,90])];e.map.easeTo({center:a,duration:1250})}}}}})),this.reactOnSelectedFeatures=Object(S.k)((function(){e.isInitialized&&(e.props.VisualizationStore.selectedFeatureIds.length>0?(e.resetLastSelectedFeatureIdsFeatureState(),e.props.VisualizationStore.selectedFeatureIds.forEach((function(t){e.setFeatureState(t,{selected:!0})})),e.lastSelectedFeatureIds=Object(S.F)(e.props.VisualizationStore.selectedFeatureIds)):e.resetLastSelectedFeatureIdsFeatureState())})),this.reactOnHoveredFeatureChange=Object(S.k)((function(){e.isInitialized&&(e.hoveredFeatureId?(e.tooltipValues[e.hoveredFeatureId]&&e.props.VisualizationStore.setTooltip(Je({},e.tooltipValues[e.hoveredFeatureId])),e.resetLastHoveredFeatureState(),e.setFeatureState(e.hoveredFeatureId,{hovered:!0}),e.lastHoveredFeatureId=e.hoveredFeatureId):(e.resetLastHoveredFeatureState(),e.props.VisualizationStore.setTooltip(null)))}))}},{key:"setFeatureState",value:function(e,t){this.map.setFeatureState({source:this.SOURCE_IDS[this.props.VisualizationStore.layer],id:this.intIdFromFeatureId(e)},t)}},{key:"intIdFromFeatureId",value:function(e){return(e||"").replace(/\D/g,"")}},{key:"resetLastSelectedFeatureIdsFeatureState",value:function(){var e=this;this.lastSelectedFeatureIds.forEach((function(t){e.setFeatureState(t,{selected:!1})}))}},{key:"resetLastHoveredFeatureState",value:function(){this.lastHoveredFeatureId&&this.setFeatureState(this.lastHoveredFeatureId,{hovered:!1})}},{key:"addSourcesAndLayers",value:function(){var e=this;this.geojsonLayers.forEach((function(t){var r=(e.map.getStyle().layers.find((function(e){return"building"===e.id}))||{id:0}).id,n={visibility:"none"},a=Je(Je({},t.data),{},{features:t.data.features.map((function(t){return Je(Je({},t),{},{id:e.intIdFromFeatureId(t.id)})}))});e.map.addSource(e.SOURCE_IDS[t.id],{type:"geojson",data:a,tolerance:1}),e.map.addLayer({id:e.LAYER_IDS[t.id].filled,source:e.SOURCE_IDS[t.id],type:"fill",paint:{"fill-color":"rgba(255, 255, 255, 0)"},layout:n}),e.map.addLayer({id:e.LAYER_IDS[t.id].outline,source:e.SOURCE_IDS[t.id],type:"line",layout:Je(Je({},n),{},{"line-join":"round"}),paint:{"line-width":["case",["boolean",["feature-state","selected"],!1],4,["boolean",["feature-state","hovered"],!1],2,1],"line-color":e.outlineLineColorExpression}}),e.map.addLayer({id:e.LAYER_IDS[t.id].masked,source:e.SOURCE_IDS[t.id],type:"fill",paint:{"fill-pattern":"masked-pattern"},layout:n},r),e.map.addLayer({id:e.LAYER_IDS[t.id].notdefined,source:e.SOURCE_IDS[t.id],type:"fill",paint:{"fill-pattern":"undefined-pattern"},layout:n},r),e.map.addLayer({id:e.LAYER_IDS[t.id].labels,source:e.SOURCE_IDS[t.id],type:"symbol",layout:{"text-field":"{NAME}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12,"text-padding":16,visibility:"none"},paint:{"text-color":"#212529","text-halo-color":"rgba(255, 255, 255, 0.7)","text-halo-width":1.5}}),e.map.addLayer({id:e.LAYER_IDS[t.id].interaction,source:e.SOURCE_IDS[t.id],type:"fill",layout:n,paint:{"fill-opacity":0}})}))}},{key:"loadData",value:function(){this.props.FeaturesStore.requestAllFeatures(Je(Je({},this.props.VisualizationStore.requestProps),{},{ids:this.currentGeoIDs})),this.props.FeaturesStore.requestExtent(Je({},this.props.VisualizationStore.requestProps))}},{key:"hideAllOtherLayers",value:function(e){var t=this;this.geojsonLayers.filter((function(t){return t.id!==e})).forEach((function(e){Object.values(t.LAYER_IDS[e.id]).forEach((function(e){t.map.setLayoutProperty(e,"visibility","none")}))}))}},{key:"resetSublayersForLayer",value:function(e){var t=this;[e.filled,e.outline,e.labels,e.interaction,e.masked,e.notdefined].forEach((function(e){t.map.setLayoutProperty(e,"visibility","visible")}))}},{key:"focus",value:function(){this.isFocused||(this.isFocused=!0)}},{key:"blur",value:function(){this.isFocused&&(this.hoveredFeatureId=null,this.isFocused=!1)}},{key:"hideAllFeaturesExceptList",value:function(e,t){t.length>0?this.map.setPaintProperty(e,"fill-opacity",["match",["get","geo_id"]].concat(Object(i.a)(t.map((function(e){return[e,1]})).flat()),[0])):this.map.setPaintProperty(e,"fill-opacity",0)}},{key:"render",value:function(){var e=Je({accessToken:"pk.eyJ1Ijoic3R1ZGlvbmFuZCIsImEiOiIweE5RMnhNIn0.dbxUjp9BYhyA4rXlbcohhQ",onLoad:this.onLoad,onRender:this.mapRendered,onViewportChanged:this.viewportChanged,onViewportMouseMoved:this.viewportMouseMoved,onViewportMouseOut:this.viewportMouseOut,onViewportMouseClicked:this.viewportMouseClicked,focus:this.isFocused},this.props.VisualizationStore.viewport);return Xe(g.a,{onMouseDown:this.focus,onMouseLeave:this.blur,width:"100%",height:this.props.height},Xe(L.a,null,Xe(ze,{layers:this.props.layers,disabled:this.props.FeaturesStore.isLoading})),Xe(Ye.a,null),Xe(g.a,{height:"100%",position:"relative"},Xe(Ue,e),Xe(ie,null),Xe(ve,null),this.props.FeaturesStore.isLoading&&Xe(g.a,{position:"absolute",top:0,left:0,width:"100%"},Xe(y.a,{variant:"determinate",value:100*this.props.FeaturesStore.progress}))))}},{key:"geojsonLayers",get:function(){return this.props.layers.map((function(e){return e.data.features=e.data.features.map((function(e){return e.id=e.properties.geo_id,e.properties.id=e.properties.geo_id,e.properties.NAME=Object(He.a)(e),e})),e}))}},{key:"LAYER_IDS",get:function(){return this.geojsonLayers.reduce((function(e,t){return Je(Je({},e),{},Object(s.a)({},t.id,{filled:"".concat(t.id,"-filled"),masked:"".concat(t.id,"-masked"),notdefined:"".concat(t.id,"-notdefined"),outline:"".concat(t.id,"-outline"),labels:"".concat(t.id,"-labels"),interaction:"".concat(t.id,"-interaction")}))}),{})}},{key:"requiredLayers",get:function(){return Object.values(this.LAYER_IDS).flatMap((function(e){return Object.values(e)}))}},{key:"SOURCE_IDS",get:function(){return this.geojsonLayers.reduce((function(e,t){return Je(Je({},e),{},Object(s.a)({},t.id,"".concat(t.id,"-source")))}),{})}},{key:"geojsonBoundingBoxesById",get:function(){return j.a.mapValues(j.a.keyBy(this.geojsonLayers,(function(e){return e.id})),(function(e){return e.data.bbox}))}},{key:"outlineLineColorExpression",get:function(){return["case",["boolean",["feature-state","selected"],!1],"#212529",["boolean",["feature-state","hovered"],!1],"#212529",this.props.VisualizationStore.outlineColor]}},{key:"geoIDs",get:function(){return this.geojsonLayers.reduce((function(e,t){return Je(Je({},e),{},Object(s.a)({},t.id,t.data.features.map((function(e){return e.properties.geo_id}))))}),{})}},{key:"currentGeoIDs",get:function(){return this.geoIDs[this.props.VisualizationStore.layer]}},{key:"activeLayers",get:function(){return this.LAYER_IDS[this.props.VisualizationStore.layer]}},{key:"tooltipValues",get:function(){var e=this,t=Object(Z.a)(this.props.VisualizationStore.filterOptions),r={};return this.currentGeoIDs.forEach((function(n){var a=e.props.FeaturesStore.featuresByRequestId[e.props.FeaturesStore.toRequestId(Je(Je({},e.props.VisualizationStore.requestProps),{},{id:n}))];if(r[n]={},a&&a.data&&a.data.filter){var o=a.data.filter(t),i=0===o.length?-1:o[0][e.props.VisualizationStore.measure];r[n].title=0===o.length?"MISSING VALUE":Object(We.a)(o[0].name),-1===[-7777,-8888,-9999].indexOf(i)?r[n].content="".concat(e.props.VisualizationStore.formatNumber(i)," ").concat(Object(Z.g)(e.props.VisualizationStore.usage)):r[n].content="is ".concat(e.props.VisualizationStore.getNoun(i))}})),r}}]),r}(a.a.Component),Ne=Object(h.a)(Te.prototype,"isInitialized",[S.z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Be=Object(h.a)(Te.prototype,"isFocused",[S.z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ge=Object(h.a)(Te.prototype,"hoveredFeatureId",[S.z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(h.a)(Te.prototype,"onLoad",[Ve],Object.getOwnPropertyDescriptor(Te.prototype,"onLoad"),Te.prototype),Object(h.a)(Te.prototype,"geoIDs",[S.l],Object.getOwnPropertyDescriptor(Te.prototype,"geoIDs"),Te.prototype),Object(h.a)(Te.prototype,"currentGeoIDs",[S.l],Object.getOwnPropertyDescriptor(Te.prototype,"currentGeoIDs"),Te.prototype),Object(h.a)(Te.prototype,"activeLayers",[S.l],Object.getOwnPropertyDescriptor(Te.prototype,"activeLayers"),Te.prototype),Object(h.a)(Te.prototype,"tooltipValues",[S.l],Object.getOwnPropertyDescriptor(Te.prototype,"tooltipValues"),Te.prototype),Object(h.a)(Te.prototype,"focus",[De],Object.getOwnPropertyDescriptor(Te.prototype,"focus"),Te.prototype),Object(h.a)(Te.prototype,"blur",[qe],Object.getOwnPropertyDescriptor(Te.prototype,"blur"),Te.prototype),Ae=Te))||Ae),et=function(e){var t=Object(F.a)("features"),r=Object(F.a)("visualization"),n=P("100vh");return Xe($e,Object(o.a)({},e,{height:n,VisualizationStore:r,FeaturesStore:t}))},tt=r("Gd3I"),rt=r("uRPk"),nt=r("M3Sa"),at=r("CEO5"),ot=a.a.createElement;t.a=function(){return ot(et,{layers:[{id:"cities",data:nt},{id:"census_tracts",data:rt},{id:"counties",data:tt},{id:"zips",data:at}]})}},I9Uw:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("MdoE");function a(e,t,r){if(null!==e)for(var n,o,i,s,u,l,c,d,p=0,f=0,m=e.type,h="FeatureCollection"===m,g="Feature"===m,y=h?e.features.length:1,b=0;b<y;b++){u=(d=!!(c=h?e.features[b].geometry:g?e.geometry:e)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<u;v++){var O=0,w=0;if(null!==(s=d?c.geometries[v]:c)){l=s.coordinates;var j=s.type;switch(p=!r||"Polygon"!==j&&"MultiPolygon"!==j?0:1,j){case null:break;case"Point":if(!1===t(l,f,b,O,w))return!1;f++,O++;break;case"LineString":case"MultiPoint":for(n=0;n<l.length;n++){if(!1===t(l[n],f,b,O,w))return!1;f++,"MultiPoint"===j&&O++}"LineString"===j&&O++;break;case"Polygon":case"MultiLineString":for(n=0;n<l.length;n++){for(o=0;o<l[n].length-p;o++){if(!1===t(l[n][o],f,b,O,w))return!1;f++}"MultiLineString"===j&&O++,"Polygon"===j&&w++}"Polygon"===j&&O++;break;case"MultiPolygon":for(n=0;n<l.length;n++){for(w=0,o=0;o<l[n].length;o++){for(i=0;i<l[n][o].length-p;i++){if(!1===t(l[n][o][i],f,b,O,w))return!1;f++}w++}O++}break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)if(!1===a(s.geometries[n],t,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&!1!==t(e.features[r].properties,r);r++);break;case"Feature":t(e.properties,0)}}function i(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var r=0;r<e.features.length&&!1!==t(e.features[r],r);r++);}function s(e,t){var r,n,a,o,i,s,u,l,c,d,p=0,f="FeatureCollection"===e.type,m="Feature"===e.type,h=f?e.features.length:1;for(r=0;r<h;r++){for(s=f?e.features[r].geometry:m?e.geometry:e,l=f?e.features[r].properties:m?e.properties:{},c=f?e.features[r].bbox:m?e.bbox:void 0,d=f?e.features[r].id:m?e.id:void 0,i=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,a=0;a<i;a++)if(null!==(o=u?s.geometries[a]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(o,p,l,c,d))return!1;break;case"GeometryCollection":for(n=0;n<o.geometries.length;n++)if(!1===t(o.geometries[n],p,l,c,d))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,p,l,c,d))return!1;p++}}function u(e,t){s(e,(function(e,r,a,o,i){var s,u=null===e?null:e.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==t(n.feature(e,a,{bbox:o,id:i}),r,0)&&void 0}switch(u){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var l=0;l<e.coordinates.length;l++){var c={type:s,coordinates:e.coordinates[l]};if(!1===t(n.feature(c,a),r,l))return!1}}))}function l(e,t){u(e,(function(e,r,o){var i=0;if(e.geometry){var s=e.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var u,l=0,c=0,d=0;return!1!==a(e,(function(a,s,p,f,m){if(void 0===u||r>l||f>c||m>d)return u=a,l=r,c=f,d=m,void(i=0);var h=n.lineString([u,a],e.properties);if(!1===t(h,r,o,m,i))return!1;i++,u=a}))&&void 0}}}))}function c(e,t){if(!e)throw new Error("geojson is required");u(e,(function(e,r,a){if(null!==e.geometry){var o=e.geometry.type,i=e.geometry.coordinates;switch(o){case"LineString":if(!1===t(e,r,a,0,0))return!1;break;case"Polygon":for(var s=0;s<i.length;s++)if(!1===t(n.lineString(i[s],e.properties),r,a,s))return!1}}}))}t.coordEach=a,t.coordReduce=function(e,t,r,n){var o=r;return a(e,(function(e,n,a,i,s){o=0===n&&void 0===r?e:t(o,e,n,a,i,s)}),n),o},t.propEach=o,t.propReduce=function(e,t,r){var n=r;return o(e,(function(e,a){n=0===a&&void 0===r?e:t(n,e,a)})),n},t.featureEach=i,t.featureReduce=function(e,t,r){var n=r;return i(e,(function(e,a){n=0===a&&void 0===r?e:t(n,e,a)})),n},t.coordAll=function(e){var t=[];return a(e,(function(e){t.push(e)})),t},t.geomEach=s,t.geomReduce=function(e,t,r){var n=r;return s(e,(function(e,a,o,i,s){n=0===a&&void 0===r?e:t(n,e,a,o,i,s)})),n},t.flattenEach=u,t.flattenReduce=function(e,t,r){var n=r;return u(e,(function(e,a,o){n=0===a&&0===o&&void 0===r?e:t(n,e,a,o)})),n},t.segmentEach=l,t.segmentReduce=function(e,t,r){var n=r,a=!1;return l(e,(function(e,o,i,s,u){n=!1===a&&void 0===r?e:t(n,e,o,i,s,u),a=!0})),n},t.lineEach=c,t.lineReduce=function(e,t,r){var n=r;return c(e,(function(e,a,o,i){n=0===a&&void 0===r?e:t(n,e,a,o,i)})),n},t.findSegment=function(e,t){if(t=t||{},!n.isObject(t))throw new Error("options is invalid");var r,a=t.featureIndex||0,o=t.multiFeatureIndex||0,i=t.geometryIndex||0,s=t.segmentIndex||0,u=t.properties;switch(e.type){case"FeatureCollection":a<0&&(a=e.features.length+a),u=u||e.features[a].properties,r=e.features[a].geometry;break;case"Feature":u=u||e.properties,r=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=e;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var l=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=l.length+s-1),n.lineString([l[s],l[s+1]],u,t);case"Polygon":return i<0&&(i=l.length+i),s<0&&(s=l[i].length+s-1),n.lineString([l[i][s],l[i][s+1]],u,t);case"MultiLineString":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s-1),n.lineString([l[o][s],l[o][s+1]],u,t);case"MultiPolygon":return o<0&&(o=l.length+o),i<0&&(i=l[o].length+i),s<0&&(s=l[o][i].length-s-1),n.lineString([l[o][i][s],l[o][i][s+1]],u,t)}throw new Error("geojson is invalid")},t.findPoint=function(e,t){if(t=t||{},!n.isObject(t))throw new Error("options is invalid");var r,a=t.featureIndex||0,o=t.multiFeatureIndex||0,i=t.geometryIndex||0,s=t.coordIndex||0,u=t.properties;switch(e.type){case"FeatureCollection":a<0&&(a=e.features.length+a),u=u||e.features[a].properties,r=e.features[a].geometry;break;case"Feature":u=u||e.properties,r=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=e;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var l=r.coordinates;switch(r.type){case"Point":return n.point(l,u,t);case"MultiPoint":return o<0&&(o=l.length+o),n.point(l[o],u,t);case"LineString":return s<0&&(s=l.length+s),n.point(l[s],u,t);case"Polygon":return i<0&&(i=l.length+i),s<0&&(s=l[i].length+s),n.point(l[i][s],u,t);case"MultiLineString":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s),n.point(l[o][s],u,t);case"MultiPolygon":return o<0&&(o=l.length+o),i<0&&(i=l[o].length+i),s<0&&(s=l[o][i].length-s),n.point(l[o][i][s],u,t)}throw new Error("geojson is invalid")}},LLEl:function(e,t,r){"use strict";var n=r("Fcif"),a=r("dV/x"),o=r("mXGw"),i=(r("W0B4"),r("PDtE")),s=r("mxPc"),u=r("gbh0"),l=r("Rx6o"),c=r("lOOT"),d=o.forwardRef((function(e,t){var r=e.classes,u=e.className,l=e.color,d=void 0===l?"primary":l,p=e.value,f=e.valueBuffer,m=e.variant,h=void 0===m?"indeterminate":m,g=Object(a.a)(e,["classes","className","color","value","valueBuffer","variant"]),y=Object(c.a)(),b={},v={bar1:{},bar2:{}};if("determinate"===h||"buffer"===h)if(void 0!==p){b["aria-valuenow"]=Math.round(p),b["aria-valuemin"]=0,b["aria-valuemax"]=100;var O=p-100;"rtl"===y.direction&&(O=-O),v.bar1.transform="translateX(".concat(O,"%)")}else 0;if("buffer"===h)if(void 0!==f){var w=(f||0)-100;"rtl"===y.direction&&(w=-w),v.bar2.transform="translateX(".concat(w,"%)")}else 0;return o.createElement("div",Object(n.a)({className:Object(i.a)(r.root,r["color".concat(Object(s.a)(d))],u,{determinate:r.determinate,indeterminate:r.indeterminate,buffer:r.buffer,query:r.query}[h]),role:"progressbar"},b,{ref:t},g),"buffer"===h?o.createElement("div",{className:Object(i.a)(r.dashed,r["dashedColor".concat(Object(s.a)(d))])}):null,o.createElement("div",{className:Object(i.a)(r.bar,r["barColor".concat(Object(s.a)(d))],("indeterminate"===h||"query"===h)&&r.bar1Indeterminate,{determinate:r.bar1Determinate,buffer:r.bar1Buffer}[h]),style:v.bar1}),"determinate"===h?null:o.createElement("div",{className:Object(i.a)(r.bar,("indeterminate"===h||"query"===h)&&r.bar2Indeterminate,"buffer"===h?[r["color".concat(Object(s.a)(d))],r.bar2Buffer]:r["barColor".concat(Object(s.a)(d))]),style:v.bar2}))}));t.a=Object(u.a)((function(e){var t=function(t){return"light"===e.palette.type?Object(l.e)(t,.62):Object(l.a)(t,.5)},r=t(e.palette.primary.main),n=t(e.palette.secondary.main);return{root:{position:"relative",overflow:"hidden",height:4,"@media print":{colorAdjust:"exact"}},colorPrimary:{backgroundColor:r},colorSecondary:{backgroundColor:n},determinate:{},indeterminate:{},buffer:{backgroundColor:"transparent"},query:{transform:"rotate(180deg)"},dashed:{position:"absolute",marginTop:0,height:"100%",width:"100%",animation:"$buffer 3s infinite linear"},dashedColorPrimary:{backgroundImage:"radial-gradient(".concat(r," 0%, ").concat(r," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0 -23px"},dashedColorSecondary:{backgroundImage:"radial-gradient(".concat(n," 0%, ").concat(n," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0 -23px"},bar:{width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},barColorPrimary:{backgroundColor:e.palette.primary.main},barColorSecondary:{backgroundColor:e.palette.secondary.main},bar1Indeterminate:{width:"auto",animation:"$indeterminate1 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite"},bar1Determinate:{transition:"transform .".concat(4,"s linear")},bar1Buffer:{zIndex:1,transition:"transform .".concat(4,"s linear")},bar2Indeterminate:{width:"auto",animation:"$indeterminate2 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite"},bar2Buffer:{transition:"transform .".concat(4,"s linear")},"@keyframes indeterminate1":{"0%":{left:"-35%",right:"100%"},"60%":{left:"100%",right:"-90%"},"100%":{left:"100%",right:"-90%"}},"@keyframes indeterminate2":{"0%":{left:"-200%",right:"100%"},"60%":{left:"107%",right:"-8%"},"100%":{left:"107%",right:"-8%"}},"@keyframes buffer":{"0%":{opacity:1,backgroundPosition:"0 -23px"},"50%":{opacity:0,backgroundPosition:"0 -23px"},"100%":{opacity:1,backgroundPosition:"-200px -23px"}}}}),{name:"MuiLinearProgress"})(d)},LdlQ:function(e,t,r){"use strict";var n=r("mXGw"),a=r("I9Y2");t.a=Object(a.a)(n.createElement("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft")},MdoE:function(e,t,r){"use strict";function n(e,t,r){void 0===r&&(r={});var n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=t||{},n.geometry=e,n}function a(e,t,r){return void 0===r&&(r={}),n({type:"Point",coordinates:e},t,r)}function o(e,t,r){void 0===r&&(r={});for(var a=0,o=e;a<o.length;a++){var i=o[a];if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<i[i.length-1].length;s++)if(i[i.length-1][s]!==i[0][s])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:e},t,r)}function i(e,t,r){if(void 0===r&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:e},t,r)}function s(e,t){void 0===t&&(t={});var r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function u(e,t,r){return void 0===r&&(r={}),n({type:"MultiLineString",coordinates:e},t,r)}function l(e,t,r){return void 0===r&&(r={}),n({type:"MultiPoint",coordinates:e},t,r)}function c(e,t,r){return void 0===r&&(r={}),n({type:"MultiPolygon",coordinates:e},t,r)}function d(e,r){void 0===r&&(r="kilometers");var n=t.factors[r];if(!n)throw new Error(r+" units is invalid");return e*n}function p(e,r){void 0===r&&(r="kilometers");var n=t.factors[r];if(!n)throw new Error(r+" units is invalid");return e/n}function f(e){return 180*(e%(2*Math.PI))/Math.PI}function m(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)&&!/^\s*$/.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.earthRadius=6371008.8,t.factors={centimeters:100*t.earthRadius,centimetres:100*t.earthRadius,degrees:t.earthRadius/111325,feet:3.28084*t.earthRadius,inches:39.37*t.earthRadius,kilometers:t.earthRadius/1e3,kilometres:t.earthRadius/1e3,meters:t.earthRadius,metres:t.earthRadius,miles:t.earthRadius/1609.344,millimeters:1e3*t.earthRadius,millimetres:1e3*t.earthRadius,nauticalmiles:t.earthRadius/1852,radians:1,yards:t.earthRadius/1.0936},t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/t.earthRadius,yards:1/1.0936},t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},t.feature=n,t.geometry=function(e,t,r){switch(void 0===r&&(r={}),e){case"Point":return a(t).geometry;case"LineString":return i(t).geometry;case"Polygon":return o(t).geometry;case"MultiPoint":return l(t).geometry;case"MultiLineString":return u(t).geometry;case"MultiPolygon":return c(t).geometry;default:throw new Error(e+" is invalid")}},t.point=a,t.points=function(e,t,r){return void 0===r&&(r={}),s(e.map((function(e){return a(e,t)})),r)},t.polygon=o,t.polygons=function(e,t,r){return void 0===r&&(r={}),s(e.map((function(e){return o(e,t)})),r)},t.lineString=i,t.lineStrings=function(e,t,r){return void 0===r&&(r={}),s(e.map((function(e){return i(e,t)})),r)},t.featureCollection=s,t.multiLineString=u,t.multiPoint=l,t.multiPolygon=c,t.geometryCollection=function(e,t,r){return void 0===r&&(r={}),n({type:"GeometryCollection",geometries:e},t,r)},t.round=function(e,t){if(void 0===t&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,t||0);return Math.round(e*r)/r},t.radiansToLength=d,t.lengthToRadians=p,t.lengthToDegrees=function(e,t){return f(p(e,t))},t.bearingToAzimuth=function(e){var t=e%360;return t<0&&(t+=360),t},t.radiansToDegrees=f,t.degreesToRadians=function(e){return e%360*Math.PI/180},t.convertLength=function(e,t,r){if(void 0===t&&(t="kilometers"),void 0===r&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return d(p(e,t),r)},t.convertArea=function(e,r,n){if(void 0===r&&(r="meters"),void 0===n&&(n="kilometers"),!(e>=0))throw new Error("area must be a positive number");var a=t.areaFactors[r];if(!a)throw new Error("invalid original units");var o=t.areaFactors[n];if(!o)throw new Error("invalid final units");return e/a*o},t.isNumber=m,t.isObject=function(e){return!!e&&e.constructor===Object},t.validateBBox=function(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach((function(e){if(!m(e))throw new Error("bbox must only contain numbers")}))},t.validateId=function(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")},t.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},t.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},t.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},t.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},t.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},t.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},t.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},N3FF:function(e,t,r){"use strict"},Vz49:function(e,t,r){"use strict";var n=r("63Ad");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("mXGw")),o=(0,n(r("c9Um")).default)(a.default.createElement("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight");t.default=o},ZsFq:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("I9Uw");t.default=function(e){var t=[1/0,1/0,-1/0,-1/0];return n.coordEach(e,(function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])})),t}},oCDM:function(e,t,r){"use strict";var n=r("mXGw"),a=(r("W0B4"),"undefined"!==typeof window?n.useLayoutEffect:n.useEffect);t.a=function(e){var t=e.children,r=e.defer,o=void 0!==r&&r,i=e.fallback,s=void 0===i?null:i,u=n.useState(!1),l=u[0],c=u[1];return a((function(){o||c(!0)}),[o]),n.useEffect((function(){o&&c(!0)}),[o]),n.createElement(n.Fragment,null,l?t:s)}},tB06:function(e,t,r){"use strict";function n(e,t,r,n,a){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}r.d(t,"a",(function(){return n}))}}]);